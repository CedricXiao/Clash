# ===== 基础配置 =====
port: 7890            # HTTP 代理端口
socks-port: 7891       # SOCKS5 代理端口
allow-lan: true        # 允许局域网访问
bind-address: "*"      # 监听所有网卡
mode: Rule              # 规则模式（Rule/Global/Direct）
log-level: error         # 日志级别
external-controller: :9090  # 控制面板 API 端口
unified-delay: true

# ===== DNS 配置（Fake-IP）=====
dns:
  enable: true
  listen: :1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  default-nameserver:
    - 223.6.6.6
    - 223.5.5.5
  nameserver:
    - https://8.8.4.4/dns-query
    - https://1.1.1.1/dns-query
  fallback:
    - https://8.8.8.8/dns-query
    - https://1.0.0.1/dns-query
  fake-ip-filter:
    - "*.lan"
    - "*.localdomain"
    - "*.example"
    - "*.invalid"
    - "*.test"
    - "localhost"
    - "*.ntp.org"
    - "time.*.com"
    - "*.time.edu.cn"
    - "*.winshare.com.cn"
    - "*.winxuan.com"  
    - "*.mytorch.cn"  


proxy-groups:
- name: AmyTelecom
  icon: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/icon/qure/color/Proxy.png
  type: select
  proxies:
  - Auto
  - "\U0001F1ED\U0001F1F0 香港 01"
  - "\U0001F1ED\U0001F1F0 香港 02"
  - "\U0001F1ED\U0001F1F0 香港 03"
  - "\U0001F1ED\U0001F1F0 香港 04"
  - "\U0001F1ED\U0001F1F0 香港 05"
  - "\U0001F1ED\U0001F1F0 香港 06"
  - "\U0001F1ED\U0001F1F0 香港 07"
  - "\U0001F1ED\U0001F1F0 香港 08"
  - "\U0001F1ED\U0001F1F0 香港 09"
  - "\U0001F1ED\U0001F1F0 香港 10"
  - "\U0001F1ED\U0001F1F0 香港 11"
  - "\U0001F1ED\U0001F1F0 香港 12"
  - "\U0001F1ED\U0001F1F0 香港 13"
  - "\U0001F1ED\U0001F1F0 香港 14"
  - "\U0001F1ED\U0001F1F0 香港 15"
  - "\U0001F1ED\U0001F1F0 香港 16"
  - "\U0001F1ED\U0001F1F0 香港 17"
  - "\U0001F1ED\U0001F1F0 香港 18"
  - "\U0001F1ED\U0001F1F0 香港 19"
  - "\U0001F1ED\U0001F1F0 香港 20"
  - "\U0001F1ED\U0001F1F0 香港 21"
  - "\U0001F1FA\U0001F1F8 美国 01"
  - "\U0001F1FA\U0001F1F8 美国 02"
  - "\U0001F1FA\U0001F1F8 美国 03"
  - "\U0001F1FA\U0001F1F8 美国 04"
  - "\U0001F1FA\U0001F1F8 美国 05"
  - "\U0001F1FA\U0001F1F8 美国 06"
  - "\U0001F1FA\U0001F1F8 美国 07"
  - "\U0001F1FA\U0001F1F8 美国 08"
  - "\U0001F1FA\U0001F1F8 美国 09"
  - "\U0001F1FA\U0001F1F8 美国 10"
  - "\U0001F1FA\U0001F1F8 美国 11"
  - "\U0001F1FA\U0001F1F8 美国 12"
  - "\U0001F1FA\U0001F1F8 美国 13"
  - "\U0001F1EF\U0001F1F5 日本 01"
  - "\U0001F1EF\U0001F1F5 日本 02"
  - "\U0001F1EF\U0001F1F5 日本 03"
  - "\U0001F1EF\U0001F1F5 日本 04"
  - "\U0001F1EF\U0001F1F5 日本 05"
  - "\U0001F1EF\U0001F1F5 日本 06"
  - "\U0001F1EF\U0001F1F5 日本 07"
  - "\U0001F1EF\U0001F1F5 日本 08"
  - "\U0001F1E8\U0001F1F3 台湾 01"
  - "\U0001F1E8\U0001F1F3 台湾 02"
  - "\U0001F1E8\U0001F1F3 台湾 03"
  - "\U0001F1E8\U0001F1F3 台湾 04"
  - "\U0001F1E8\U0001F1F3 台湾 05"
  - "\U0001F1E8\U0001F1F3 台湾 06"
  - "\U0001F1E8\U0001F1F3 台湾 07"
  - "\U0001F1E8\U0001F1F3 台湾 08"
  - "\U0001F1E8\U0001F1F3 台湾 09"
  - "\U0001F1E8\U0001F1F3 台湾 10"
  - "\U0001F1F8\U0001F1EC 新加坡 01"
  - "\U0001F1F8\U0001F1EC 新加坡 02"
  - "\U0001F1F8\U0001F1EC 新加坡 03"
  - "\U0001F1F8\U0001F1EC 新加坡 04"
- name: Auto
  icon: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/icon/qure/color/Proxy.png
  type: url-test
  proxies:
  - "\U0001F1ED\U0001F1F0 香港 12"
  - "\U0001F1ED\U0001F1F0 香港 13"
  - "\U0001F1ED\U0001F1F0 香港 14"
  - "\U0001F1ED\U0001F1F0 香港 15"
  - "\U0001F1ED\U0001F1F0 香港 16"
  - "\U0001F1ED\U0001F1F0 香港 17"
  url: http://1.1.1.1
  interval: 30000
- name: PS5游戏加速
  type: select
  proxies:
  - DIRECT
  - AmyTelecom
rule-providers:
  秋风广告规则:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main//Filters/AWAvenue-Ads-Rule-Clash.yaml
    interval: 86400
    path: ./rule_providers/AWAvenue-Ads-Rule-Clash.yaml
  ChinaMax:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/ChinaMax/ChinaMax_Classical_No_IPv6.yaml
    interval: 86400
    path: ./ChinaMax_Classical_No_IPv6.yaml
  gfw:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 86400
  telegramcidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./ruleset/telegramcidr.yaml
    interval: 86400
rules:
- RULE-SET,telegramcidr,AmyTelecom
- RULE-SET,gfw,AmyTelecom

- SRC-IP-CIDR,100.64.0.0/16,DIRECT
- DOMAIN,local.adguard.org,DIRECT
- DOMAIN-SUFFIX,local,DIRECT
- IP-CIDR,127.0.0.0/8,DIRECT
- IP-CIDR,172.16.0.0/12,DIRECT
- IP-CIDR,192.168.0.0/16,DIRECT
- IP-CIDR,10.0.0.0/8,DIRECT
- IP-CIDR,17.0.0.0/8,DIRECT
- IP-CIDR,100.64.0.0/10,DIRECT
- IP-CIDR,224.0.0.0/4,DIRECT
- IP-CIDR,203.0.113.0/24,DIRECT
- IP-CIDR,192.0.2.0/24,DIRECT
- RULE-SET,ChinaMax,DIRECT
- RULE-SET,秋风广告规则,REJECT
- GEOIP,CN,DIRECT
- GEOIP,LAN,DIRECT
- DOMAIN-SUFFIX,amytele.com,AmyTelecom
- MATCH,PS5游戏加速
